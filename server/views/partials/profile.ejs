<section class="py-3 container">
  <h1 class="h3">Il mio profilo</h1>

  <!-- Dati anagrafici -->
  <form id="form-profile" class="stack" autocomplete="on">
    <strong>Dati personali</strong>

    <div>
      <label>
        Nome
        <input
          type="text"
          name="first_name"
          autocomplete="given-name"
          required
        />
      </label>

      <label>
        Cognome
        <input
          type="text"
          name="last_name"
          autocomplete="family-name"
          required
        />
      </label>
    </div>

    <label>
      Email (sola lettura)
      <input type="email" name="email" autocomplete="email" readonly />
    </label>

    <div class="stack">
      <label>
        Città
        <input type="text" name="city" autocomplete="address-level2" required />
      </label>

      <div class="grid-auto">
        <label>
          CAP
          <input
            type="text"
            name="cap"
            inputmode="numeric"
            pattern="^[0-9]{5}$"
            placeholder="00000"
            autocomplete="postal-code"
            required
          />
        </label>

        <label>
          Indirizzo
          <input
            type="text"
            name="address"
            autocomplete="address-line1"
            required
          />
        </label>

        <label>
          Telefono
          <input
            type="tel"
            name="phone"
            inputmode="numeric"
            pattern="^[0-9]{10}$"
            placeholder="es. 3331234567"
            autocomplete="tel"
            required
          />
        </label>
      </div>
    </div>

    <button type="submit" class="btn">Salva profilo</button>
    <div id="profile-msg" class="muted"></div>
  </form>

  <!--Indirizzi salvati-->
  <div id="addresses-box" class="mt-3 stack">
    <strong>Indirizzi di Spedizione Salvati</strong>

    <div id="addresses-list" class="stack gap-2"></div>

    <form id="form-add-address" class="address-add-form stack">
      <p class="muted">Aggiungi nuovo indirizzo:</p>
      <div class="grid-auto">
        <input
          type="text"
          name="label"
          placeholder="Etichetta (es. Casa Nonna)"
          required
        />
        <input type="text" name="city" placeholder="Città" required />
        <input
          type="text"
          name="cap"
          placeholder="CAP"
          pattern="\d{5}"
          required
        />
        <input type="text" name="address" placeholder="Via/Piazza" required />
      </div>

      <button type="submit" class="btn">+ Aggiungi Indirizzo</button>
    </form>
  </div>

  <!-- Cambio password -->
  <form id="form-password" class="stack card-box mt-3" autocomplete="on">
    <strong>Cambio password</strong>

    <!-- Username/email nascosto ma autofillabile (senza aria-hidden) -->
    <label class="visually-hidden" for="pw-username">Email</label>
    <input
      type="text"
      id="pw-username"
      name="username"
      autocomplete="username"
      tabindex="-1"
      class="visually-hidden"
      autocapitalize="none"
      spellcheck="false"
    />

    <div class="grid-auto">
      <label>
        Password attuale
        <input
          type="password"
          name="current_password"
          autocomplete="current-password"
          required
        />
      </label>
      <label>
        Nuova password
        <input
          type="password"
          name="new_password"
          minlength="6"
          autocomplete="new-password"
          required
        />
      </label>
    </div>

    <button type="submit" class="btn">Aggiorna password</button>
    <div id="password-msg" class="muted"></div>
  </form>

  <!-- Eliminazione account -->
  <form id="form-delete-account" class="stack" autocomplete="on">
    <strong>Elimina account</strong>
    <p class="muted">
      Operazione irreversibile. Tutte le prenotazioni e i dati collegati
      verranno rimossi definitivamente.
    </p>

    <!-- Username/email nascosto ma autofillabile -->

    <label class="visually-hidden" for="da-username">Email</label>
    <input
      type="text"
      id="da-username"
      name="username"
      autocomplete="username"
      tabindex="-1"
      class="visually-hidden"
      autocapitalize="none"
      spellcheck="false"
    />

    <label>
      Password attuale
      <input
        type="password"
        name="current_password"
        autocomplete="current-password"
        required
      />
    </label>

    <button type="submit" class="btn btn-danger">
      Elimina definitivamente
    </button>
    <div id="delete-msg" class="muted"></div>
  </form>
</section>
